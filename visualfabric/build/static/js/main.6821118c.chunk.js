(this.webpackJsonpvisualfabric=this.webpackJsonpvisualfabric||[]).push([[0],{11:function(e,t,a){e.exports={block:"block_block__2tMt-",number:"block_number__32JFg"}},20:function(e,t,a){e.exports={nav:"search_nav__1dmlB",writes:"search_writes__1h5wK"}},21:function(e,t,a){e.exports={button:"button_button__3L_BO",danger:"button_danger__2vUVO"}},34:function(e,t,a){e.exports={header:"layout_header__3xTmc"}},35:function(e,t,a){e.exports={param:"param_param__3pRi7",dots:"param_dots__29xS5"}},36:function(e,t,a){e.exports={group:"group_group__2ifWo",object:"group_object__aZB8d"}},57:function(e,t,a){e.exports={chain:"chain_chain__3zjbA"}},6:function(e,t,a){e.exports={advBlock:"advancedBlock_advBlock__392in",visible:"advancedBlock_visible__U9e4r",closeBtn:"advancedBlock_closeBtn__1HUuU",number:"advancedBlock_number__dTTrL"}},98:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a(18),r=a.n(s),i=a(7),l=a(8),o=a(55),d=a(34),j=a.n(d),u=function(e){return Object(n.jsxs)(c.Fragment,{children:[Object(n.jsxs)("header",{className:j.a.header,children:["VisualFabric by Rafa\u0142 Adamski - Thesis",Object(n.jsx)("br",{}),"Military University of Technology"]}),Object(n.jsx)("main",{className:j.a.layout,children:e.children})]})},b=a(22),h=a(56),_="INIT_CHAIN",p="ADD_BLOCK",v="SHOW_ADVANCED_BLOCK",O="HIDE_ADVANCED_BLOCK",m=function(e){return function(t){e.on("loadChain",(function(e){console.log("loading chain"),t(function(e){return{type:_,loadedChain:e}}(e))}))}},x=a(11),f=a.n(x),y=a(35),k=a.n(y),g=function(e){return Object(n.jsxs)("p",{className:k.a.param,children:[e.title,Object(n.jsx)("b",{className:k.a.dots,children:":"}),Object(n.jsx)("span",{children:e.val})]})},w=a(36),N=a.n(w),B=function(e){var t="";switch(null===e||void 0===e?void 0:e.type){case"object":t=N.a.object;break;default:t=""}return Object(n.jsxs)("div",{className:[N.a.group,e.className,t].join(" "),children:[Object(n.jsx)("h3",{children:e.name}),e.children]})},A=function(e){var t,a=e.data.data.header,c=e.data.data.data,s=e.data.data.metadata;t=s.signatures.map((function(e){return e.creator_msp_id+", "}));var r=[];c.forEach((function(e){var t=e.channel_header.channel_id,a=e.channel_header.timestamp,n=e.signature_header.creator_msp_id;e.actions.forEach((function(e){var c=e.proposal_response_payload.results.ns_rwset,s="",i="";c.forEach((function(e){e.rwset.reads.forEach((function(e){return s+=e+", "})),e.rwset.writes.forEach((function(e){return i+=e.value+", "}))})),r.push({channel_id:t,timestamp:a,creator_msp_id:n,reads:s,writes:i})}))}));var i;return i=r.map((function(e,t){return Object(n.jsxs)(B,{name:"Transaction",className:f.a.transaction,children:[Object(n.jsx)(g,{title:"channel_id",val:e.channel_id}),Object(n.jsx)(g,{title:"creator_msp_id",val:e.creator_msp_id}),Object(n.jsx)(g,{title:"timestamp",val:e.timestamp}),Object(n.jsx)(g,{title:"reads",val:e.reads}),Object(n.jsx)(g,{title:"writes",val:e.writes})]},t)})),Object(n.jsxs)("div",{className:f.a.block,onClick:e.showAdvanced,children:[Object(n.jsxs)("h2",{children:["Block ",Object(n.jsxs)("span",{className:f.a.number,children:["#",a.number]})]}),Object(n.jsxs)(B,{name:"Header",className:f.a.header,children:[Object(n.jsx)(g,{title:"data_hash",val:a.data_hash}),Object(n.jsx)(g,{title:"previous_hash",val:a.previous_hash})]}),i,Object(n.jsxs)(B,{name:"Metadata",className:f.a.metadata,children:[Object(n.jsx)(g,{title:"signatures",val:t}),Object(n.jsx)(g,{title:"value",val:s.value})]})]})},E=a(20),C=a.n(E),D=function(e){var t=Object(c.useRef)(),a=Object(c.useRef)();return Object(n.jsxs)("nav",{className:C.a.nav,children:[Object(n.jsxs)("div",{className:C.a.nr,children:[Object(n.jsx)("label",{htmlFor:"BlockNr",children:"Find block number:"}),Object(n.jsx)("input",{ref:t,id:"BlockNr",type:"number",onChange:function(t){a.current.value=null;var n=t.target.value;""===n?e.setNr(-1):e.setNr(n)}})]}),Object(n.jsxs)("div",{className:C.a.writes,children:[Object(n.jsx)("label",{htmlFor:"BlockWrites",children:"Find in writes:"}),Object(n.jsx)("input",{ref:a,id:"BlockWrites",type:"text",onChange:function(a){t.current.value=null;var n=a.target.value;""===n?e.setWrite(""):e.setWrite(n)}})]})]})},S=a(57),W=a.n(S),F=Object(i.b)((function(e){return{chain:e.chain.chain}}),(function(e){return{loadChain:function(t){return e(m(t))},showAdvancedBlock:function(t){return e(function(e){return{type:v,data:e}}(t))}}}))((function(e){var t=Object(c.useState)(-1),a=Object(b.a)(t,2),s=a[0],r=a[1],l=Object(c.useState)(""),o=Object(b.a)(l,2),d=o[0],j=o[1],u=Object(c.useState)(),_=Object(b.a)(u,2),v=_[0],O=_[1],x=Object(i.c)();Object(c.useEffect)((function(){console.log("connection");var e=Object(h.io)("http://127.0.0.1:8000",{transports:["websocket"]});return x(m(e)),e.on("addBlock",(function(e){console.log("AddBlock socket event"),x(function(e){return{type:p,newBlock:e}}(e))})),function(){console.log("socket disconnect"),e.disconnect()}}),[x]);Object(c.useMemo)((function(){console.log("initLoad");var t=e.chain.map((function(t){return Object(n.jsx)(A,{data:t,showAdvanced:function(){return e.showAdvancedBlock(t)}},t.id)}));O(t)}),[e]);return Object(c.useEffect)((function(){console.log("NR");var t=e.chain;-1!==s&&(t=e.chain.filter((function(e){return e.id===s.toString()})));var a=t.map((function(t){return Object(n.jsx)(A,{data:t,showAdvanced:function(){return e.showAdvancedBlock(t)}},t.id)}));O(a)}),[s]),Object(c.useEffect)((function(){console.log("WRITE");var t=e.chain;""!==d&&(t=e.chain.filter((function(e){var t="";return e.data.data.forEach((function(e){e.actions.forEach((function(e){e.proposal_response_payload.results.ns_rwset.forEach((function(e){e.rwset.writes.forEach((function(e){return t+=e.value+", "}))}))}))})),t.includes(d)})));var a=t.map((function(t){return Object(n.jsx)(A,{data:t,showAdvanced:function(){return e.showAdvancedBlock(t)}},t.id)}));O(a)}),[d]),console.log("obok"),Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)(D,{setNr:function(e){return r(e)},setWrite:function(e){return j(e)}}),Object(n.jsx)("div",{className:W.a.chain,children:v})]})})),H=a(6),R=a.n(H),T=a(21),I=a.n(T),L=function(e){var t=[I.a.button,e.className];switch(e.type){case"danger":t.push(I.a.danger);break;default:t.push(I.a.info)}return Object(n.jsx)("button",{className:t.join(" "),onClick:e.action,children:e.children})},M=function(e){return Object(n.jsxs)(B,{name:"Header",className:e.className,children:[Object(n.jsx)(g,{title:"number",val:e.data.number}),Object(n.jsx)(g,{title:"data_hash",val:e.data.data_hash}),Object(n.jsx)(g,{title:"previous_hash",val:e.data.previous_hash})]})},U=function(e){var t,a=e.data;return t=a.signatures.map((function(e,t){return Object(n.jsxs)(B,{name:"Signature",children:[Object(n.jsx)(g,{title:"creator_msp_id",val:e.creator_msp_id}),Object(n.jsx)(g,{title:"signature",val:e.signature})]},t)})),Object(n.jsxs)(B,{name:"Metadata",className:e.className,children:[Object(n.jsx)(g,{title:"value",val:a.value}),t]})},K=function(e){var t;return t=e.data.map((function(e,t){var a;a=e.endorsements.map((function(e,t){return Object(n.jsxs)(B,{name:"Endorsement",children:[Object(n.jsx)(g,{title:"creator_msp_id",val:e.creator_msp_id}),Object(n.jsx)(g,{title:"signature",val:e.signature})]},t)}));var c;return c=e.proposal_response_payload.results.ns_rwset.map((function(e,t){var a;a=e.rwset.writes.map((function(e,t){return Object(n.jsxs)(B,{name:"Write",children:[Object(n.jsx)(g,{title:"key",val:e.key}),Object(n.jsx)(g,{title:"is_delete",val:e.is_delete}),Object(n.jsx)(g,{title:"value",val:e.value})]},t)}));var c;return c=e.collection_hashed_rwset.map((function(e,t){var a;a=e.hashed_reads.map((function(e,t){return Object(n.jsxs)(B,{name:"HashedRead",children:[Object(n.jsx)(g,{title:"key_hash",val:e.key_hash}),Object(n.jsx)(g,{title:"block_num",val:e.block_num}),Object(n.jsx)(g,{title:"tx_num",val:e.tx_num}),Object(n.jsx)(g,{title:"is_delete",val:e.is_delete}),Object(n.jsx)(g,{title:"value_hash",val:e.value_hash})]},t)}));var c;return c=e.hashed_writes.map((function(e,t){return Object(n.jsxs)(B,{name:"HashedWrite",children:[Object(n.jsx)(g,{title:"key_hash",val:e.key_hash}),Object(n.jsx)(g,{title:"block_num",val:e.block_num}),Object(n.jsx)(g,{title:"tx_num",val:e.tx_num}),Object(n.jsx)(g,{title:"is_delete",val:e.is_delete}),Object(n.jsx)(g,{title:"value_hash",val:e.value_hash})]},t)})),Object(n.jsxs)(B,{name:"CollectionHashedRWSet",children:[Object(n.jsx)(g,{title:"collection_name",val:e.collection_name}),Object(n.jsx)(g,{title:"pvt_rwset_hash",val:e.pvt_rwset_hash}),Object(n.jsx)(B,{type:"object",name:"hashed_reads",children:a}),Object(n.jsx)(B,{type:"object",name:"hashed_writes",children:c})]},t)})),Object(n.jsxs)(B,{name:"RWSet",children:[Object(n.jsx)(g,{title:"namespace",val:e.namespace}),Object(n.jsxs)(B,{type:"object",name:"rwset",children:[Object(n.jsx)(g,{title:"reads",val:e.rwset.reads.join(", ")}),Object(n.jsx)(g,{title:"range_queries_info",val:e.rwset.range_queries_info.join(", ")}),a]}),c]},t)})),Object(n.jsxs)(B,{name:"Action",children:[Object(n.jsxs)(B,{type:"object",name:"header",children:[Object(n.jsx)(g,{title:"creator_msp_id",val:e.header.creator_msp_id}),Object(n.jsx)(g,{title:"creator_id_bytes",val:e.header.creator_id_bytes})]}),Object(n.jsxs)(B,{type:"object",name:"chaincode_proposal_payload",children:[Object(n.jsx)(g,{title:"type",val:e.chaincode_proposal_payload.type}),Object(n.jsx)(g,{title:"typeString",val:e.chaincode_proposal_payload.typeString}),Object(n.jsx)(g,{title:"chaincode_id_name",val:e.chaincode_proposal_payload.chaincode_id_name}),Object(n.jsxs)(B,{type:"object",name:"input",children:[Object(n.jsx)(g,{title:"args",val:e.chaincode_proposal_payload.input.args.join(", ")}),Object(n.jsx)(g,{title:"decorations",val:e.chaincode_proposal_payload.input.decorations}),Object(n.jsx)(g,{title:"is_init",val:e.chaincode_proposal_payload.input.is_init})]})]}),Object(n.jsxs)(B,{type:"object",name:"chaincode_response_payload",children:[Object(n.jsx)(g,{title:"proposal_hash",val:e.proposal_response_payload.proposal_hash}),Object(n.jsxs)(B,{type:"object",name:"results",children:[Object(n.jsx)(g,{title:"data_model",val:e.proposal_response_payload.results.data_model}),c]}),Object(n.jsxs)(B,{type:"object",name:"events",children:[Object(n.jsx)(g,{title:"chaincode_id",val:e.proposal_response_payload.events.chaincode_id}),Object(n.jsx)(g,{title:"tx_id",val:e.proposal_response_payload.events.tx_id}),Object(n.jsx)(g,{title:"event_name",val:e.proposal_response_payload.events.event_name}),Object(n.jsx)(g,{title:"payload",val:e.proposal_response_payload.events.payload})]}),Object(n.jsxs)(B,{type:"object",name:"response",children:[Object(n.jsx)(g,{title:"status",val:e.proposal_response_payload.response.status}),Object(n.jsx)(g,{title:"message",val:e.proposal_response_payload.response.message}),Object(n.jsx)(g,{title:"payload",val:e.proposal_response_payload.response.payload})]}),Object(n.jsxs)(B,{type:"object",name:"chaincode_id",children:[Object(n.jsx)(g,{title:"path",val:e.proposal_response_payload.chaincode_id.path}),Object(n.jsx)(g,{title:"name",val:e.proposal_response_payload.chaincode_id.name}),Object(n.jsx)(g,{title:"version",val:e.proposal_response_payload.chaincode_id.version})]})]}),a]},t)})),Object(n.jsx)(c.Fragment,{children:t})},V=function(e){var t;return t=e.data.map((function(t,a){return Object(n.jsxs)(B,{name:"Block Data",className:e.className,children:[Object(n.jsx)(g,{title:"signature",val:t.signature}),Object(n.jsxs)(B,{type:"object",name:"channel_header",children:[Object(n.jsx)(g,{title:"type",val:t.channel_header.type}),Object(n.jsx)(g,{title:"version",val:t.channel_header.version}),Object(n.jsx)(g,{title:"timestamp",val:t.channel_header.timestamp}),Object(n.jsx)(g,{title:"chennel_id",val:t.channel_header.channel_id}),Object(n.jsx)(g,{title:"tx_id",val:t.channel_header.tx_id}),Object(n.jsx)(g,{title:"extension",val:t.channel_header.extension}),Object(n.jsx)(g,{title:"typeString",val:t.channel_header.typeString})]}),Object(n.jsxs)(B,{type:"object",name:"signature_header",children:[Object(n.jsx)(g,{title:"creator_msp_id",val:t.signature_header.creator_msp_id}),Object(n.jsx)(g,{title:"creator_id_bytes",val:t.signature_header.creator_id_bytes})]}),Object(n.jsx)(K,{data:t.actions})]},a)})),Object(n.jsx)(c.Fragment,{children:t})},J=Object(i.b)((function(e){return{blockData:e.block.blockData,visible:e.block.visible}}),(function(e){return{hideAdvancedBlock:function(){return e({type:O})}}}))((function(e){var t=[R.a.advBlock];if(e.visible&&t.push(R.a.visible),null!==e.blockData){var a=e.blockData.data.header,c=e.blockData.data.data,s=e.blockData.data.metadata;return Object(n.jsxs)("div",{className:t.join(" "),children:[Object(n.jsx)(L,{className:R.a.closeBtn,type:"danger",action:function(){return e.hideAdvancedBlock()},children:"Close"}),Object(n.jsxs)("h2",{children:["Block ",Object(n.jsxs)("span",{className:R.a.number,children:["#",a.number]})]}),Object(n.jsx)(M,{data:a,className:R.a.header}),Object(n.jsx)(V,{data:c,className:R.a.data}),Object(n.jsx)(U,{data:s,className:R.a.metadata})]})}return Object(n.jsx)("div",{className:t.join(" ")})})),q=function(){return Object(n.jsxs)(u,{children:[Object(n.jsx)(J,{}),Object(n.jsx)(F,{})]})},z=a(37),Z={chain:[]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{chain:Object(z.a)(t.loadedChain)};case p:return{chain:[].concat(Object(z.a)(e.chain),[t.newBlock])};default:return e}},P=a(23),Q={blockData:null,visible:!1},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var a=Object(P.a)({},t.data);return{blockData:a,visible:!0};case O:return Object(P.a)(Object(P.a)({},e),{},{visible:!1});default:return e}},Y=l.d,$=Object(l.c)({chain:G,block:X}),ee=Object(l.e)($,Y(Object(l.a)(o.a))),te=Object(n.jsx)(i.a,{store:ee,children:Object(n.jsx)(q,{})});r.a.render(te,document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.6821118c.chunk.js.map